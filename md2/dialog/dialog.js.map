{"version":3,"sources":["dialog/dialog.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAAA,qBAgBO,eAAe,CAAC,CAAA;IACvB,uBAA2B,iBAAiB,CAAC,CAAA;IAC7C,qBAMO,cAAc,CAAC,CAAA;IACtB,wBAAsB,WAAW,CAAC,CAAA;IAGlC;QAAqC,mCAAc;QACjD,yBAAY,WAA6B,EAAE,gBAAkC;YAC3E,kBAAM,WAAW,EAAE,gBAAgB,CAAC,CAAC;QACvC,CAAC;QAJH;YAAC,gBAAS,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,CAAC;;2BAAA;QAK7C,sBAAC;IAAD,CAJA,AAIC,CAJoC,qBAAc,GAIlD;IAJY,uBAAe,kBAI3B,CAAA;IAGD;QAAA;QAA8B,CAAC;QAD/B;YAAC,gBAAS,CAAC,EAAE,QAAQ,EAAE,kBAAkB,EAAE,CAAC;;0BAAA;QACd,qBAAC;IAAD,CAA9B,AAA+B,IAAA;IAAlB,sBAAc,iBAAI,CAAA;IAG/B;QAAA;QAA+B,CAAC;QADhC;YAAC,gBAAS,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,CAAC;;2BAAA;QACd,sBAAC;IAAD,CAA/B,AAAgC,IAAA;IAAnB,uBAAe,kBAAI,CAAA;IAiDhC;QACE,mBAAoB,OAAgB;YAAhB,YAAO,GAAP,OAAO,CAAS;YAG1B,WAAM,GAA4B,IAAI,mBAAY,EAAa,CAAC;YAChE,YAAO,GAAsB,IAAI,mBAAY,EAAO,CAAC;YACrD,aAAQ,GAAsB,IAAI,mBAAY,EAAO,CAAC;YAKhE,4BAA4B;YACpB,aAAQ,GAAY,KAAK,CAAC;YAIlC,uDAAuD;YAC9C,WAAM,GAAG,IAAI,mBAAY,EAAE,CAAC;YAErC,gBAAgB;YACR,eAAU,GAAe,IAAI,CAAC;QAlBtC,CAAC;QAoBD,+BAAW,GAAX;YACE,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;QACtB,CAAC;QAED,wBAAwB;QACxB,wBAAI,GAAJ;YACE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;QACrB,CAAC;QAED,sBAAsB;QACtB,wBAAI,GAAJ;YAAA,iBAaC;YAZC,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE;iBAChB,IAAI,CAAC,cAAM,OAAA,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,EAAhC,CAAgC,CAAC;iBAC5C,IAAI,CAAC,UAAC,GAAe;gBACpB,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC;gBACtB,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;YACjC,CAAC,CAAC;iBACD,IAAI,CAAC,cAAM,OAAA,iBAAO,CAAC,IAAI,EAAE,EAAd,CAAc,CAAC;iBAC1B,IAAI,CAAC;gBACJ,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,CAAC;gBACvB,MAAM,CAAC,KAAI,CAAC;YACd,CAAC,CAAC,CAAC;QACP,CAAC;QAED,uBAAuB;QACvB,yBAAK,GAAL,UAAM,MAAkB,EAAE,MAAuB;YAAjD,iBAkBC;YAlBK,sBAAkB,GAAlB,aAAkB;YAAE,sBAAuB,GAAvB,cAAuB;YAC/C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAY,IAAI,CAAC,CAAC;YAC1C,CAAC;YACD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,iDAAiD;YACjD,MAAM,CAAC,iBAAO,CAAC,IAAI,CAAC,GAAG,CAAC;iBACrB,IAAI,CAAC,cAAM,OAAA,KAAI,CAAC,UAAU,CAAC,MAAM,EAAE,EAAxB,CAAwB,CAAC;iBACpC,IAAI,CAAC;gBACJ,KAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;gBAC1B,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;oBACX,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC7B,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5B,CAAC;gBACD,MAAM,CAAC,KAAI,CAAC;YACd,CAAC,CAAC,CAAC;QACP,CAAC;QAEO,sCAAkB,GAA1B,UAA2B,KAAoB;YAC7C,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC,CAAC;gBACxB,IAAI,CAAC,KAAK,EAAE,CAAC;YACf,CAAC;QACH,CAAC;QApED;YAAC,aAAM,EAAE;;iDAAA;QACT;YAAC,aAAM,EAAE;;kDAAA;QACT;YAAC,aAAM,EAAE;;mDAAA;QAGT;YAAC,gBAAS,CAAC,eAAe,CAAC;;iDAAA;QAK3B;YAAC,YAAK,CAAC,OAAO,CAAC;;sDAAA;QAGf;YAAC,YAAK,EAAE;;iDAAA;QAhEV;YAAC,gBAAS,CAAC;gBACT,QAAQ,EAAE,MAAM,CAAC,EAAE;gBACnB,QAAQ,EAAE,YAAY;gBACtB,QAAQ,EAAE,+sBAgBT;gBACD,MAAM,EAAE,CAAC,4zFAoBR,CAAC;gBACF,IAAI,EAAE;oBACJ,UAAU,EAAE,GAAG;oBACf,gBAAgB,EAAE,4BAA4B;iBAC/C;gBACD,aAAa,EAAE,wBAAiB,CAAC,IAAI;aACtC,CAAC;;qBAAA;QA0EF,gBAAC;IAAD,CAzEA,AAyEC,IAAA;IAzEY,iBAAS,YAyErB,CAAA;IAEY,6BAAqB,GAAU,CAAC,SAAS,EAAE,cAAc,EAAE,eAAe;QACrF,eAAe;KAChB,CAAC;IAEW,4BAAoB,GAAU;QACzC,cAAO,EAAE,wBAAiB;KAC3B,CAAC;IAOF;QAAA;QAOA,CAAC;QANQ,uBAAO,GAAd;YACE,MAAM,CAAC;gBACL,QAAQ,EAAE,eAAe;gBACzB,SAAS,EAAE,4BAAoB;aAChC,CAAC;QACJ,CAAC;QAXH;YAAC,eAAQ,CAAC;gBACR,YAAY,EAAE,6BAAqB;gBACnC,OAAO,EAAE,CAAC,qBAAY,CAAC;gBACvB,OAAO,EAAE,6BAAqB;aAC/B,CAAC;;2BAAA;QAQF,sBAAC;IAAD,CAPA,AAOC,IAAA;IAPY,uBAAe,kBAO3B,CAAA","file":"dialog/dialog.js","sourcesContent":["import {\r\n  Component,\r\n  Output,\r\n  Input,\r\n  ContentChild,\r\n  EventEmitter,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n  OnDestroy,\r\n  ChangeDetectionStrategy,\r\n  //Provider,\r\n  Directive,\r\n  ViewContainerRef,\r\n  TemplateRef,\r\n  NgModule,\r\n  ModuleWithProviders\r\n} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {\r\n  Overlay,\r\n  OVERLAY_PROVIDERS,\r\n  OverlayState,\r\n  OverlayRef,\r\n  TemplatePortal\r\n} from '../core/core';\r\nimport {Animate} from './animate';\r\n\r\n@Directive({ selector: '[md2DialogPortal]' })\r\nexport class Md2DialogPortal extends TemplatePortal {\r\n  constructor(templateRef: TemplateRef<any>, viewContainerRef: ViewContainerRef) {\r\n    super(templateRef, viewContainerRef);\r\n  }\r\n}\r\n\r\n@Directive({ selector: 'md2-dialog-title' })\r\nexport class Md2DialogTitle { }\r\n\r\n@Directive({ selector: 'md2-dialog-footer' })\r\nexport class Md2DialogFooter { }\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md2-dialog',\r\n  template: `\r\n    <template md2DialogPortal>\r\n      <div class=\"md2-dialog\" [class.open]=\"isOpened\">\r\n        <div class=\"md2-dialog-container\">\r\n          <div class=\"md2-dialog-header\">\r\n            <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"close()\">&times;</button>\r\n            <h2 *ngIf=\"dialogTitle\" class=\"md2-dialog-title\" id=\"myDialogLabel\" [innerHtml]=\"dialogTitle\"></h2>\r\n            <ng-content select=\"md2-dialog-title\"></ng-content>\r\n          </div>\r\n          <div class=\"md2-dialog-body\">\r\n            <ng-content></ng-content>\r\n          </div>\r\n          <ng-content select=\"md2-dialog-footer\"></ng-content>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  `,\r\n  styles: [`\r\n    .md2-dialog-open { overflow-y: hidden; }\r\n    .md2-dialog { position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 1050; background-color: rgba(33, 33, 33, 0.48); display: none; overflow-x: hidden; overflow-y: scroll; -webkit-overflow-scrolling: touch; outline: 0; }\r\n    .md2-dialog.open { display: block; }\r\n    .md2-dialog .md2-dialog-container { position: relative; width: auto; margin: 15px; background-color: #fff; -webkit-background-clip: padding-box; -moz-background-clip: padding-box; background-clip: padding-box; border-radius: 0 0 4px 4px; outline: 0; -webkit-box-shadow: 0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12); box-shadow: 0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12); -webkit-transition: .3s; -o-transition: .3s; -moz-transition: .3s; transition: .3s; -webkit-transform: scale(0.1); -ms-transform: scale(0.1); -o-transform: scale(0.1); -moz-transform: scale(0.1); transform: scale(0.1); }\r\n    .md2-dialog.open .md2-dialog-container { -webkit-transform: scale(1); -ms-transform: scale(1); -o-transform: scale(1); -moz-transform: scale(1); transform: scale(1); }\r\n    @media (min-width: 768px) {\r\n      .md2-dialog .md2-dialog-container { width: 600px; margin: 30px auto; }\r\n    }\r\n    .md2-dialog-header { background: #2196f3; color: #fff; font-size: 25px; line-height: 1.1; font-weight: 500; padding: 0 16px; border-bottom: 1px solid #e5e5e5; }\r\n    .md2-dialog-header .close { position: absolute; top: 21px; right: 16px; display: inline-block; width: 18px; height: 18px; overflow: hidden; -webkit-appearance: none; padding: 0; cursor: pointer; background: 0 0; border: 0; outline: 0; opacity: 0.8; font-size: 0; z-index: 1; min-width: initial; box-shadow: none; margin: 0; }\r\n    .md2-dialog-header .close::before,\r\n    .md2-dialog-header .close::after { content: ''; position: absolute; top: 50%; left: 0; height: 2px; width: 100%; margin-top: -1px;background: #ccc;border-radius: 2px;height: 2px;}\r\n    .md2-dialog-header .close::before {-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg);transform: rotate(45deg);}\r\n    .md2-dialog-header .close::after {-webkit-transform: rotate(-45deg);-moz-transform: rotate(-45deg);-ms-transform: rotate(-45deg);-o-transform: rotate(-45deg);transform: rotate(-45deg);}\r\n    .md2-dialog-header .close:hover { opacity: 1; }\r\n    .md2-dialog-header md2-dialog-title, .md2-dialog-header .md2-dialog-title { margin: 0; font-size: 25px; line-height: 60px; font-weight: 500; }\r\n    .md2-dialog-header dialog-header { line-height: 33px; }\r\n    .md2-dialog-body { position: relative; padding: 16px; }\r\n    .md2-dialog-footer, md2-dialog-footer { display: block; padding: 16px; text-align: right; border-top: 1px solid rgba(0,0,0,0.12); }\r\n  `],\r\n  host: {\r\n    'tabindex': '0',\r\n    '(body:keydown)': 'onDocumentKeypress($event)'\r\n  },\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class Md2Dialog implements OnDestroy {\r\n  constructor(private overlay: Overlay) {\r\n  }\r\n\r\n  @Output() onShow: EventEmitter<Md2Dialog> = new EventEmitter<Md2Dialog>();\r\n  @Output() onClose: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() onCancel: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  /** The portal to send the dialog content through */\r\n  @ViewChild(Md2DialogPortal) private portal: Md2DialogPortal;\r\n\r\n  /** Is the dialog active? */\r\n  private isOpened: boolean = false;\r\n\r\n  @Input('title') dialogTitle: string;\r\n\r\n  /** Overlay configuration for positioning the dialog */\r\n  @Input() config = new OverlayState();\r\n\r\n  /** @internal */\r\n  private overlayRef: OverlayRef = null;\r\n\r\n  ngOnDestroy(): any {\r\n    return this.close();\r\n  }\r\n\r\n  ///** Show the dialog */\r\n  show(): Promise<Md2Dialog> {\r\n    return this.open();\r\n  }\r\n\r\n  /** Open the dialog */\r\n  open(): Promise<Md2Dialog> {\r\n    return this.close()\r\n      .then(() => this.overlay.create(this.config))\r\n      .then((ref: OverlayRef) => {\r\n        this.overlayRef = ref;\r\n        return ref.attach(this.portal);\r\n      })\r\n      .then(() => Animate.wait())\r\n      .then(() => {\r\n        this.isOpened = true;\r\n        this.onShow.emit(this);\r\n        return this;\r\n      });\r\n  }\r\n\r\n  /** Close the dialog */\r\n  close(result: any = true, cancel: boolean = false): Promise<Md2Dialog> {\r\n    if (!this.overlayRef) {\r\n      return Promise.resolve<Md2Dialog>(this);\r\n    }\r\n    this.isOpened = false;\r\n    // TODO(jd): this is terrible, use animate states\r\n    return Animate.wait(100)\r\n      .then(() => this.overlayRef.detach())\r\n      .then(() => {\r\n        this.overlayRef.dispose();\r\n        this.overlayRef = null;\r\n        if (cancel) {\r\n          this.onCancel.emit(result);\r\n        } else {\r\n          this.onClose.emit(result);\r\n        }\r\n        return this;\r\n      });\r\n  }\r\n\r\n  private onDocumentKeypress(event: KeyboardEvent) {\r\n    if (event.keyCode == 27) {\r\n      this.close();\r\n    }\r\n  }\r\n}\r\n\r\nexport const MD2_DIALOG_DIRECTIVES: any[] = [Md2Dialog, Md2DialogTitle, Md2DialogFooter,\r\n  Md2DialogPortal\r\n];\r\n\r\nexport const MD2_DIALOG_PROVIDERS: any[] = [\r\n  Overlay, OVERLAY_PROVIDERS\r\n];\r\n\r\n@NgModule({\r\n  declarations: MD2_DIALOG_DIRECTIVES,\r\n  imports: [CommonModule],\r\n  exports: MD2_DIALOG_DIRECTIVES,\r\n})\r\nexport class Md2DialogModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: Md2DialogModule,\r\n      providers: MD2_DIALOG_PROVIDERS\r\n    };\r\n  }\r\n}"],"sourceRoot":"/source/"}