{"version":3,"sources":["menu/menu.ts"],"names":[],"mappings":"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","file":"menu/menu.js","sourcesContent":["import {\r\n  ContentChild,\r\n  Directive,\r\n  ElementRef,\r\n  Host,\r\n  HostListener,\r\n  OnDestroy,\r\n  NgModule,\r\n  ModuleWithProviders\r\n} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\n@Directive({ selector: '[md2-menu-not-closable]' })\r\nexport class Md2MenuNotClosable {\r\n\r\n  constructor(private elementRef: ElementRef) { }\r\n\r\n  /**\r\n   * contains\r\n   * @param element\r\n   */\r\n  public contains(element: HTMLElement) {\r\n    let thisElement: HTMLElement = this.elementRef.nativeElement;\r\n    return thisElement.contains(element);\r\n  }\r\n}\r\n\r\n@Directive({\r\n  selector: '[md2-menu]',\r\n  host: {\r\n    'role': 'menu',\r\n    '[class.md2-menu]': 'true',\r\n    '[class.open]': 'isVisible'\r\n  }\r\n})\r\nexport class Md2Menu {\r\n\r\n  private isVisible: boolean = false;\r\n\r\n  @ContentChild(Md2MenuNotClosable) notClosable: Md2MenuNotClosable;\r\n\r\n  constructor(private elementRef: ElementRef) { }\r\n\r\n  /**\r\n   * open menu\r\n   */\r\n  public open() { this.isVisible = true; }\r\n\r\n  /**\r\n   * close menu\r\n   */\r\n  public close() { this.isVisible = false; }\r\n\r\n  /**\r\n   * check closeble\r\n   * @param element\r\n   */\r\n  isInClosableZone(element: HTMLElement) {\r\n    if (!this.notClosable) { return false; }\r\n    return this.notClosable.contains(element);\r\n  }\r\n\r\n}\r\n\r\n@Directive({ selector: '[md2-menu-open]' })\r\nexport class Md2MenuOpen implements OnDestroy {\r\n\r\n  private close = (event: MouseEvent) => {\r\n    if (!this.menu.isInClosableZone(<HTMLElement>event.target) &&\r\n      event.target !== this.elementRef.nativeElement) {\r\n      this.menu.close();\r\n      document.removeEventListener('click', this.close);\r\n    }\r\n  };\r\n\r\n  constructor( @Host() private menu: Md2Menu, private elementRef: ElementRef) { }\r\n\r\n  @HostListener('click')\r\n  private open() {\r\n    this.menu.open();\r\n    document.addEventListener('click', this.close, true);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    document.removeEventListener('click', this.close);\r\n  }\r\n\r\n}\r\n\r\nexport const MD2_MENU_DIRECTIVES: any[] = [Md2MenuNotClosable, Md2Menu, Md2MenuOpen];\r\n\r\n@NgModule({\r\n  declarations: MD2_MENU_DIRECTIVES,\r\n  imports: [CommonModule],\r\n  exports: MD2_MENU_DIRECTIVES,\r\n})\r\nexport class Md2MenuModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: Md2MenuModule,\r\n      providers: []\r\n    };\r\n  }\r\n}"],"sourceRoot":"/source/"}