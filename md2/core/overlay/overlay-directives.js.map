{"version":3,"sources":["core/overlay/overlay-directives.ts"],"names":[],"mappings":"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","file":"core/overlay/overlay-directives.js","sourcesContent":["import {\r\n    NgModule,\r\n    ModuleWithProviders,\r\n    Directive,\r\n    TemplateRef,\r\n    ViewContainerRef,\r\n    OnInit,\r\n    Input,\r\n    OnDestroy,\r\n    ElementRef\r\n} from '@angular/core';\r\nimport {Overlay, OVERLAY_PROVIDERS} from './overlay';\r\nimport {OverlayRef} from './overlay-ref';\r\nimport {TemplatePortal} from '../portal/portal';\r\nimport {OverlayState} from './overlay-state';\r\nimport {ConnectionPositionPair} from './position/connected-position';\r\nimport {PortalModule} from '../portal/portal-directives';\r\n\r\n\r\n/** Default set of positions for the overlay. Follows the behavior of a dropdown. */\r\nlet defaultPositionList = [\r\n  new ConnectionPositionPair(\r\n      {originX: 'start', originY: 'bottom'},\r\n      {overlayX: 'start', overlayY: 'top'}),\r\n  new ConnectionPositionPair(\r\n      {originX: 'start', originY: 'top'},\r\n      {overlayX: 'start', overlayY: 'bottom'}),\r\n];\r\n\r\n\r\n/**\r\n * Directive applied to an element to make it usable as an origin for an Overlay using a\r\n * ConnectedPositionStrategy.\r\n */\r\n@Directive({\r\n  selector: '[overlay-origin]',\r\n  exportAs: 'overlayOrigin',\r\n})\r\nexport class OverlayOrigin {\r\n  constructor(private _elementRef: ElementRef) { }\r\n\r\n  get elementRef() {\r\n    return this._elementRef;\r\n  }\r\n}\r\n\r\n\r\n\r\n/**\r\n * Directive to facilitate declarative creation of an Overlay using a ConnectedPositionStrategy.\r\n */\r\n@Directive({\r\n  selector: '[connected-overlay]'\r\n})\r\nexport class ConnectedOverlayDirective implements OnInit, OnDestroy {\r\n  private _overlayRef: OverlayRef;\r\n  private _templatePortal: TemplatePortal;\r\n\r\n  @Input() origin: OverlayOrigin;\r\n  @Input() positions: ConnectionPositionPair[];\r\n\r\n  // TODO(jelbourn): inputs for size, scroll behavior, animation, etc.\r\n\r\n  constructor(\r\n      private _overlay: Overlay,\r\n      templateRef: TemplateRef<any>,\r\n      viewContainerRef: ViewContainerRef) {\r\n    this._templatePortal = new TemplatePortal(templateRef, viewContainerRef);\r\n  }\r\n\r\n  get overlayRef() {\r\n    return this._overlayRef;\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngOnInit() {\r\n    this._createOverlay();\r\n  }\r\n\r\n  /** TODO: internal */\r\n  ngOnDestroy() {\r\n    this._destroyOverlay();\r\n  }\r\n\r\n  /** Creates an overlay and attaches this directive's template to it. */\r\n  private _createOverlay() {\r\n    if (!this.positions || !this.positions.length) {\r\n      this.positions = defaultPositionList;\r\n    }\r\n\r\n    let overlayConfig = new OverlayState();\r\n    overlayConfig.positionStrategy =\r\n        this._overlay.position().connectedTo(\r\n            this.origin.elementRef,\r\n            {originX: this.positions[0].overlayX, originY: this.positions[0].originY},\r\n            {overlayX: this.positions[0].overlayX, overlayY: this.positions[0].overlayY});\r\n\r\n    this._overlayRef = this._overlay.create(overlayConfig);\r\n    this._overlayRef.attach(this._templatePortal);\r\n  }\r\n\r\n  /** Destroys the overlay created by this directive. */\r\n  private _destroyOverlay() {\r\n    this._overlayRef.dispose();\r\n  }\r\n}\r\n\r\n\r\n@NgModule({\r\n  imports: [PortalModule],\r\n  exports: [ConnectedOverlayDirective, OverlayOrigin],\r\n  declarations: [ConnectedOverlayDirective, OverlayOrigin],\r\n})\r\nexport class OverlayModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: OverlayModule,\r\n      providers: OVERLAY_PROVIDERS,\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}